"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}
var ClickTracker=function(){var client_language=navigator.languages[0];var user_agent=navigator.userAgent;var post_id=clicktracker_local.post_id;var ga_client_id='x';var running_tests='-';var checkForGoLinks=function checkForGoLinks(mutationsList){mutationsList.forEach(function(mutation){for(var i=0;i<mutation.addedNodes.length;i++){if(mutation.addedNodes[i].nodeName=="A"){if(mutation.addedNodes[i].href&&mutation.addedNodes[i].href.indexOf('/go/')!=-1){doGoLink(mutation.addedNodes[i])}}
if(mutation.addedNodes[i].nodeType==1){var aElements=mutation.addedNodes[i].getElementsByTagName('a');for(var j=0;j<aElements.length;j++){if(aElements[j].href&&aElements[j].href.indexOf('/go/')!=-1){doGoLink(aElements[j])}}}}})};var observer=new MutationObserver(checkForGoLinks);var watchForChanges=function watchForChanges(){var targetNode=document.body;var config={attributes:!0,childList:!0,subtree:!0};observer.observe(targetNode,config)};var generateUUID=function generateUUID(){var d=new Date().getTime();var d2=typeof performance!=='undefined'&&performance.now&&performance.now()*1000||0;return'xxxx-xxxx-yxxx-yxxx-xxxxxx'.replace(/[xy]/g,function(c){var r=Math.random()*16;if(d>0){r=(d+r)%16|0;d=Math.floor(d/16)}else{r=(d2+r)%16|0;d2=Math.floor(d2/16)}
return(c==='x'?r:r&0x3|0x8).toString(16)})};var checkIfAnalyticsLoaded=function checkIfAnalyticsLoaded(){return new Promise(function(resolve,reject){var timeStart=Date.now();var timeout=2000;var _isLoaded=function _isLoaded(){if(Date.now()-timeStart>timeout){reject('Timeout reached. Google analytics not loaded.');return}
if(window.ga&&ga.create){resolve(ga);return}else{setTimeout(_isLoaded,300)}};_isLoaded()})};var addUserInfo=function addUserInfo(href){var uuid=generateUUID();var stringLength=href.length;var lastChar=href.charAt(stringLength-1);var uuidString=lastChar!=='/'?'/u/':'u/';if(href.includes('/u/')){var regex=new RegExp('\/u\/(.*)');var match=href.match(regex);return href.replace(match[1],uuid)}
var href_with_click_id=href.concat(uuidString,uuid);var ga_client_id=typeof ga!=='undefined'&&typeof ga.getAll=='function'?ga.getAll()[0].get('clientId'):'x';if((typeof btbTestTracking==="undefined"?"undefined":_typeof(btbTestTracking))==='object'&&btbTestTracking!==null){var allTests=Object.keys(btbTestTracking.running);var tests='';for(var i=0;i<allTests.length;i++){tests+=i>0?"_":"";tests+=allTests[i]+"-"+btbTestTracking.running[allTests[i]]}
window.running_tests=tests}
var device=typeof btbTestTracking!=='undefined'&&btbTestTracking.device.length?btbTestTracking.device:'-';var user_info=[ga_client_id,post_id,window.running_tests,device].join('+');return href_with_click_id.concat('+',user_info)};var doGoLink=function doGoLink(go_link){var href=go_link.getAttribute('href');go_link.setAttribute("target","_blank");go_link.setAttribute('href',addUserInfo(href))};var attach=function attach(){checkIfAnalyticsLoaded().then(function(result){document.querySelectorAll("a[href*='/go/']").forEach(doGoLink)})["catch"](function(error){console.info(error);document.querySelectorAll("a[href*='/go/']").forEach(doGoLink)})};return{run:attach,watchForChanges:watchForChanges}}();var ready=function ready(callback){if(document.readyState!="loading")callback();else document.addEventListener("DOMContentLoaded",callback)};ready(function(){ClickTracker.run();ClickTracker.watchForChanges()})